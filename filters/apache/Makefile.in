##
##  Makefile -- Build procedure for sample cosign Apache module
##  Autogenerated via ``apxs -n cosign -g''.
##

#   the used tools
CC=             @CC@
APXS=           @APXS@
APACHECTL=      @APACHECTL@
INSTALL=        @INSTALL@

#   additional user defines, includes and libraries

INCPATH=        @CPPFLAGS@ @APXS_INCLUDE@ -I../../libsnet @K4INC@ @GSSINC@ -I../../common/
OPTOPTS=        @OPTOPTS@
DEFS=           @TLSDEFS@ @KRBDEFS@ @K4DEFS@ @GSSDEFS@
LIBS=           -lsnet @K4LIBS@ @GSSLIBS@
LDFLAGS=        -L../../libsnet/.libs @K4LDFLAGS@ @GSSLDFLAGS@ ${LIBS}

CFLAGS=         ${DEFS} ${OPTOPTS} @CFLAGS@ @APXS_CFLAGS_SHLIB@ ${INCPATH} -DEAPI


OBJ=	mod_cosign.o connect.o cookiefs.o sparse.o \
	../../common/argcargv.o ../../common/fbase64.o \
	../../common/mkcookie.o ../../version.o

#   the default target
all: mod_cosign.so

#   compile the DSO file
mod_cosign.so: ../../libsnet/libsnet.la ${OBJ}
	$(APXS) -c ${OBJ} ${LDFLAGS}

#   install the DSO file into the Apache installation
#   and activate it in the Apache configuration
install: all
	$(APXS) -i -a -n 'cosign' mod_cosign.so

#   cleanup
clean:
	rm -f *.o mod_cosign.so

#   reload the module by installing and restarting Apache
reload: install restart

#   the general Apache start/restart/stop procedures
start:
	$(APACHECTL) start
restart:
	$(APACHECTL) restart
stop:
	$(APACHECTL) stop

